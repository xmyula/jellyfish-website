<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>æ’è¡Œæ¦œå¾Œå°ç®¡ç†</title>
  <style>
    body { font-family: sans-serif; background-color: #f0f2f5; text-align: center; padding: 50px; }
    .login-box, .admin-container { background: white; padding: 30px; border-radius: 12px; display: inline-block; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    input { display: block; width: 200px; margin: 10px auto; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
    button { padding: 10px 20px; background: #00796b; color: white; border: none; border-radius: 4px; cursor: pointer; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border-bottom: 1px solid #eee; padding: 12px; }
    th { background: #f8f9fa; }
    .hidden { display: none; }
  </style>
</head>
<body>

  <div id="loginBox" class="login-box">
    <h2>ğŸ”’ ç®¡ç†å“¡ç™»å…¥</h2>
    <p style="font-size: 13px; color: #666;">(è«‹è¼¸å…¥è€å¸«è¦å®šçš„å¸³å¯†)</p>
    <input type="text" id="username" placeholder="å¸³è™Ÿ">
    <input type="password" id="password" placeholder="å¯†ç¢¼">
    <button onclick="checkLogin()">ç™»å…¥</button>
    <p id="errorMsg" style="color: red; font-size: 14px;"></p>
  </div>

  <div id="adminPanel" class="admin-container hidden">
    <h2>ğŸ“Š å®Œæ•´å¾Œå°è³‡æ–™åº«</h2>
    <table>
      <thead>
        <tr><th>æ’å</th><th>åå­—</th><th>åˆ†æ•¸</th><th>éŠç©æ™‚é–“</th></tr>
      </thead>
      <tbody id="fullData"></tbody>
    </table>
    <br>
    <button onclick="location.href='index.html'">ç™»å‡ºä¸¦å›éŠæˆ²</button>
  </div>

<script>
// âš ï¸ é€™è£¡è¨­å®šä½ è¦çµ¦è€å¸«çœ‹çš„å¸³è™Ÿå¯†ç¢¼
const ADMIN_USER = "admin"; 
const ADMIN_PASS = "jellyfish123"; 

const RANKING_API = "ä½ çš„æœ€æ–°GASç¶²å€"; // è¨˜å¾—æ›æˆä½ çš„ç¶²å€

function checkLogin() {
  const user = document.getElementById("username").value;
  const pass = document.getElementById("password").value;

  if (user === ADMIN_USER && pass === ADMIN_PASS) {
    document.getElementById("loginBox").classList.add("hidden");
    document.getElementById("adminPanel").classList.remove("hidden");
    loadFullData();
  } else {
    document.getElementById("errorMsg").innerText = "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ï¼";
  }
}

function loadFullData() {
  // åŒæ¨£ä½¿ç”¨ &all=true æŠ“å–å…¨éƒ¨è³‡æ–™
  fetch(RANKING_API + "?action=get&all=true")
    .then(res => res.json())
    .then(data => {
      const tbody = document.getElementById("fullData");
      tbody.innerHTML = "";
      data.forEach((item, i) => {
        const tr = tbody.insertRow();
        tr.insertCell(0).innerText = i + 1;
        tr.insertCell(1).innerText = item[0] || "åŒ¿å";
        tr.insertCell(2).innerText = item[1] || 0;
        // item[2] æ˜¯ä½ åœ¨ GAS è£¡å­˜çš„ new Date()
        const date = item[2] ? new Date(item[2]).toLocaleString() : "ç„¡ç´€éŒ„";
        tr.insertCell(3).innerText = date;
      });
    });
}
</script>
</body>
</html>
